{"version":3,"sources":["App.tsx","SVGIcon.tsx","marker.svg","reportWebVitals.ts","index.tsx"],"names":["OpenableMenus","SVGIcon","options","color","iconAnchor","L","tooltipAnchor","iconSize","opacity","popupAnchor","shadowAngle","shadowBlur","shadowColor","shadowEnable","shadowLength","shadowOpacity","shadowTranslate","weight","className","iconUrl","undefined","svgLink","interactable","setOptions","html","_createSVG","resEl","document","createElement","setAttribute","this","addEventListener","ev","style","setProperty","getSVGDocument","querySelector","cursor","x","toString","y","setColor","newColor","innerSVAG","pathAr","getElementsByTagNameNS","Object","values","path","hasAttribute","rectAr","rect","App","props","map","lineMap","Map","bus","LayerGroup","tram","trolleybus","markerGroup","state","date","Date","hour","getHours","autoHour","currMenu","NONE","setInterval","updateThing","bind","center","maxBounds","zoom","tileLayer","attribution","minZoom","maxZoom","subdomains","accessToken","addTo","setUpRoutes","fetch","getMonth","getDate","mode","method","then","response","json","clearLayers","forEach","a","id","passengers","relativeActivity","name","longName","num","shortName","type","shape","showRoute","routeId","routePath","Marker","coord","icon","MarkerSVG","Point","getColour","bindTooltip","segmentData","v","k","polyline","between","colour","amount","colourDiv","split","length","Error","substring","replace","colourReal","parseInt","setStyle","changeLight","get","activity","sticky","onRouteHoverOn","onRouteHoverOff","generateStopRoute","set","addLayer","setState","menuType","ROUTE","getElementById","classList","remove","add","TRIP","STOP","min","max","value","toISOString","onChange","e","target","checked","valueAsNumber","removeFrom","hidden","onClick","openMenu","React","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"4KASKA,E,mGCJQC,G,MAAb,kDAsBC,WAAYC,GAAgB,IAAD,8BAC1B,cAAMA,IAtBPA,QAA0B,CACzBC,MAAO,mBACPC,WAAY,IAAIC,QAAQ,EAAG,GAC3BC,cAAe,IAAID,QAAQ,EAAG,GAC9BE,SAAU,IAAIF,QAAQ,GAAI,IAC1BG,QAAS,EACTC,YAAa,IAAIJ,QAAQ,EAAG,GAC5BK,YAAa,GACbC,WAAY,EACZC,YAAa,cACbC,cAAc,EACdC,aAAc,IACdC,cAAe,GACfC,gBAAiB,IAAIX,QAAQ,EAAG,GAChCY,OAAQ,EACRC,UAAW,UACXC,aAASC,EACTC,aAASD,EACTE,cAAc,GAKdpB,EAAUG,OAAOkB,WAAP,eAAwBrB,GAElC,EAAKA,QAAQsB,KAAO,EAAKC,aAJC,EAtB5B,8CA6BC,WAAyC,IAAD,OACjCC,EAAQC,SAASC,cAAc,UAWrC,OAVAF,EAAMG,aAAa,OAAQC,KAAK5B,QAAQmB,SAExCK,EAAMK,iBAAiB,QAAQ,SAACC,GAC/BN,EAAMO,MAAMC,YAAY,iBAAkB,QACtC,EAAKhC,QAAQoB,eAAcI,EAAMS,iBAAkBC,cAAc,OAAQH,MAAMI,OAAS,WAC5FX,EAAMS,iBAAkBC,cAAc,OAAQP,aAAa,QAAS,EAAK3B,QAAQK,SAAS+B,EAAEC,WAAa,MACzGb,EAAMS,iBAAkBC,cAAc,OAAQP,aAAa,SAAU,EAAK3B,QAAQK,SAASiC,EAAED,WAAa,MAC1G,EAAKE,SAAS,EAAKvC,QAAQC,UAGrBuB,IAzCT,sBA4CC,SAASgB,GACRZ,KAAK5B,QAAQC,MAAQuC,EAErB,IAAMC,EAAab,KAAK5B,QAAQsB,KAA2BW,iBAE3D,GAAKQ,EAAL,CAKA,IAHA,IAAMC,EAASD,EAAUE,uBAAuB,6BAA8B,QAG9E,MAF4BC,OAAOC,OAAOH,GAE1C,eAA0B,CAArB,IAAMI,EAAI,KACVA,EAAKC,aAAa,qBAEtBD,EAAKf,MAAMC,YAAY,OAAQQ,GAC/BM,EAAKf,MAAMC,YAAY,UAAWJ,KAAK5B,QAAQM,QAAQ+B,aAMxD,IAHA,IAAMW,EAASP,EAAUE,uBAAuB,6BAA8B,QAG9E,MAF4BC,OAAOC,OAAOG,GAE1C,eAA0B,CAArB,IAAMC,EAAI,KACVA,EAAKF,aAAa,qBAEtBE,EAAKlB,MAAMC,YAAY,OAAQQ,GAC/BS,EAAKlB,MAAMC,YAAY,UAAWJ,KAAK5B,QAAQM,QAAQ+B,mBApE1D,GAA6BlC,YCLd,MAA0B,mC,iBFSpCL,O,eAAAA,I,iBAAAA,I,eAAAA,I,gBAAAA,M,SAqTUoD,E,kDArSd,WAAYC,GAAiB,IAAD,8BAC3B,cAAMA,IARPC,IAAoB,KAOQ,EAN5BC,QAAiC,IAAIC,IAMT,EAL5BC,IAAkB,IAAIC,aAKM,EAJ5BC,KAAmB,IAAID,aAIK,EAH5BE,WAAyB,IAAIF,aAGD,EAF5BG,YAA0B,IAAIH,aAK7B,EAAKI,MAAQ,CACZC,KAAM,IAAIC,KAAK,cACfC,MAAM,IAAID,MAAOE,WACjBC,UAAU,EACVC,SAAUpE,EAAcqE,MAEzBC,YAAY,EAAKC,YAAYC,KAAjB,gBAA6B,MATd,E,qDAY5B,WACiB,MAAZ1C,KAAKwB,MACRxB,KAAKwB,IAAMjD,IAAEiD,IAAI,MAAO,CACvBmB,OAAQ,CAAC,MAAO,OAChBC,UAAW,CAAC,CAAC,MAAO,MAAQ,CAAC,MAAO,QACpCC,KAAM,MAGQtE,IAAEuE,UAAU,mFAAoF,CAC/GC,YAAa,kMACbC,QAAS,GACTC,QAAS,GACTC,WAAY,OACZC,YAAa,qEAEJC,MAAMpD,KAAKwB,KACrBxB,KAAK+B,YAAYqB,MAAMpD,KAAKwB,KAC5BxB,KAAKqD,gB,yBAGN,WAAe,IAAD,OAKbC,MAAM,0DAAD,OAA4DtD,KAAKgC,MAAMC,KAAcsB,WAAa,EAAlG,gBAA4GvD,KAAKgC,MAAMC,KAAcuB,UAArI,iBAAuJxD,KAAKgC,MAAMG,KAAlK,iCAJ0B,CAC9BsB,KAAM,OACNC,OAAQ,QAGPC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACC,GACN,EAAKjC,IAAImC,cACT,EAAKjC,KAAKiC,cACV,EAAKhC,WAAWgC,cAChBF,EAASG,SAAQ,SAACC,GACjB,IAAIC,EAAKD,EAAEC,GACPC,EAAaF,EAAEG,iBACfC,EAAOJ,EAAEK,SACTC,EAAMN,EAAEO,UACRC,EAAOR,EAAEQ,KACb,QAAgBlF,IAAZ0E,EAAES,MAAN,CACA,IAAIA,EAAQT,EAAES,MACd,EAAKC,UAAUD,EAAOP,EAAY,IAAMI,EAAM,KAAOF,EAAO,QAAUJ,EAAEE,WAAa,cAAeD,EAAIO,Y,+BAK5G,SAAkBG,EAAiBC,GAAsB,IAAD,OAOvDtB,MAAM,wDAAD,OAA0DtD,KAAKgC,MAAMC,KAAcsB,WAAa,EAAhG,gBAA0GvD,KAAKgC,MAAMC,KAAcuB,UAAnI,iBAAqJxD,KAAKgC,MAAMG,KAAhK,8BAA0LwC,GAJhK,CAC9BlB,KAAM,OACNC,OAAQ,QAGPC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACC,GAcN,OAbA,EAAK7B,YAAY+B,cACjBF,EAASG,SAAQ,SAACC,GAGJ,IAAIa,SAAOb,EAAEc,MAAO,CAChCC,KAAM,IAAI5G,EAAQ,CACjBoB,QAASyF,EACT1G,WAAY,CAAC,GAAI,IACjBG,SAAU,IAAIF,IAAE0G,MAAM,GAAI,IAC1B5G,MAAO,EAAK6G,UAAUlB,EAAEG,sBAEvBgB,YAAY,eAAiBnB,EAAEE,YAAYd,MAAM,EAAKrB,gBAEnD,UACL4B,MAAK,SAAAK,S,2BAiBV,SAAcoB,GAAqC,IAAD,OACjDA,EAAYrB,SAAQ,SAACsB,EAAGC,GACR/G,IAAEgH,SAASD,EAAG,CAAEjH,MAAO,EAAK6G,UAAUG,GAAIlG,OAAQ,GAAIT,QAAS,KACrE0E,MAAM,EAAK5B,U,uBAKtB,SAAUgE,GACT,MAAO,OAAU,KAAO,EAAIA,GAAY,IAAO,IAAMA,EAAW,Q,yBAGjE,SAAYC,EAAgBC,GAC3B,IAAIC,EAAsBF,EAAOG,MAAM,KACvC,GAAyB,IAArBD,EAAUE,OAAc,MAAM,IAAIC,MAAM,kBAC5CH,EAAU,GAAKA,EAAU,GAAGI,UAAU,GACtCJ,EAAU,GAAKA,EAAU,GAAGK,QAAQ,IAAK,IACzC,IAAIC,EAAuBN,EAAUnE,KAAI,SAAAhB,GAAC,OAAI0F,SAAS1F,MACvD,OAAIkF,GAAU,EACP,OAAN,OAAcO,EAAW,GAAKP,EAA9B,YAAwCO,EAAW,GAAKP,EAAxD,YAAkEO,EAAW,GAAKP,EAAlF,KAEM,OAAN,OAAcO,EAAW,IAAMP,EAA/B,YAAyCO,EAAW,IAAMP,EAA1D,YAAoEO,EAAW,IAAMP,EAArF,O,4BAIF,SAAezB,GAAa,IAAD,OAC1BjE,KAAKyB,QAAQsC,SAAQ,SAACsB,EAAGC,GACpBA,IAAMrB,GACToB,EAAEc,SAAS,CACV9H,MAAO,EAAK+H,YAAY,EAAK3E,QAAQ4E,IAAIf,GAAIlH,QAAQC,OAAS,U,6BAMlE,SAAgB4F,GAAa,IAAD,OAC3BjE,KAAKyB,QAAQsC,SAAQ,SAACsB,EAAGC,GACpBA,IAAMrB,GACToB,EAAEc,SAAS,CACV9H,MAAO,EAAK+H,YAAY,EAAK3E,QAAQ4E,IAAIf,GAAIlH,QAAQC,MAAQ,U,uBAMjE,SAAUoG,EAAiB6B,EAAkBlC,EAAcH,EAAYO,GAAe,IAAD,OAChFe,EAAWhH,IAAEgH,SAASd,EAAO,CAAEpG,MAAO2B,KAAKkF,UAAUoB,GAAWnH,OAAQ,GAAIT,QAAS,KACvFyG,YAAYf,EAAM,CAAEmC,QAAQ,IAM9B,OALAhB,EACEtF,iBAAiB,aAAa,WAAQ,EAAKuG,eAAevC,MAC1DhE,iBAAiB,YAAY,WAAQ,EAAKwG,gBAAgBxC,MAC1DhE,iBAAiB,SAAS,WAAQ,EAAKyG,kBAAkBzC,EAAI,EAAKxC,QAAQ4E,IAAIpC,OAChFjE,KAAKyB,QAAQkF,IAAI1C,EAAIsB,GACbf,GACP,KAAK,EACJxE,KAAK2B,IAAIiF,SAASrB,GAClB,MACD,KAAK,EACJvF,KAAK8B,WAAW8E,SAASrB,GACzB,MACD,KAAK,EACJvF,KAAK6B,KAAK+E,SAASrB,M,yBAKtB,WACKvF,KAAKgC,MAAMK,WACdrC,KAAK6G,SAAS,CACb5E,KAAMjC,KAAKgC,MAAMC,KACjBE,KAAMnC,KAAKgC,MAAMG,KAAO,EAAI,GAAK,EAAInC,KAAKgC,MAAMG,KAAO,EACvDE,SAAUrC,KAAKgC,MAAMK,SACrBC,SAAUtC,KAAKgC,MAAMM,WAEtBtC,KAAKqD,iB,sBAIP,SAASyD,GAA0B,IAAD,wBACjC,OAAQ9G,KAAKgC,MAAMM,UAClB,KAAKpE,EAAc6I,MAClB,UAAAlH,SAASmH,eAAe,oBAAxB,SAAsCC,UAAUC,OAAO,YACvD,UAAArH,SAASmH,eAAe,oBAAxB,SAAsCC,UAAUE,IAAI,aACpD,MACD,KAAKjJ,EAAckJ,KAClB,UAAAvH,SAASmH,eAAe,mBAAxB,SAAqCC,UAAUC,OAAO,YACtD,UAAArH,SAASmH,eAAe,mBAAxB,SAAqCC,UAAUE,IAAI,aACnD,MACD,KAAKjJ,EAAcmJ,KAClB,UAAAxH,SAASmH,eAAe,mBAAxB,SAAqCC,UAAUC,OAAO,YACtD,UAAArH,SAASmH,eAAe,mBAAxB,SAAqCC,UAAUE,IAAI,aAGrD,GAAIL,IAAa9G,KAAKgC,MAAMM,SAAU,CACrC,OAAQwE,GACP,KAAK5I,EAAc6I,MAClB,UAAAlH,SAASmH,eAAe,oBAAxB,SAAsCC,UAAUC,OAAO,aACvD,UAAArH,SAASmH,eAAe,oBAAxB,SAAsCC,UAAUE,IAAI,YACpD,MACD,KAAKjJ,EAAckJ,KAClB,UAAAvH,SAASmH,eAAe,mBAAxB,SAAqCC,UAAUC,OAAO,aACtD,UAAArH,SAASmH,eAAe,mBAAxB,SAAqCC,UAAUE,IAAI,YACnD,MACD,KAAKjJ,EAAcmJ,KAClB,UAAAxH,SAASmH,eAAe,mBAAxB,SAAqCC,UAAUC,OAAO,aACtD,UAAArH,SAASmH,eAAe,mBAAxB,SAAqCC,UAAUE,IAAI,YAGrDnH,KAAK6G,SAAS,CACb5E,KAAMjC,KAAKgC,MAAMC,KACjBE,KAAMnC,KAAKgC,MAAMG,KACjBE,SAAUrC,KAAKgC,MAAMK,SACrBC,SAAUwE,SAGX9G,KAAK6G,SAAS,CACb5E,KAAMjC,KAAKgC,MAAMC,KACjBE,KAAMnC,KAAKgC,MAAMG,KACjBE,SAAUrC,KAAKgC,MAAMK,SACrBC,SAAUpE,EAAcqE,S,oBAK3B,WAAU,IAAD,OACR,OACC,sBAAKnD,UAAU,MAAf,UACC,qBAAK6E,GAAG,QACR,sBAAKA,GAAG,MAAR,UACC,uBAAOO,KAAK,OAAOP,GAAG,aAAaqD,IAAI,aAAaC,IAAI,aAAaC,MAAOxH,KAAKgC,MAAMC,KAAKwF,cAAc7B,MAAM,KAAK,GAAI8B,SAAU,SAACC,GACnI,EAAKd,SAAS,CACb5E,KAAM,IAAIC,KAAKyF,EAAEC,OAAOJ,OACxBrF,KAAM,EAAKH,MAAMG,KACjBE,SAAU,EAAKL,MAAMK,SACrBC,SAAU,EAAKN,MAAMM,WAEtB,EAAKe,iBAEN,qBAAIY,GAAG,OAAP,UAAejE,KAAKgC,MAAMG,KAA1B,SACA,uBAAOqC,KAAK,WAAWP,GAAG,WAAWuD,MAAOxH,KAAKgC,MAAMK,SAAUqF,SAAU,SAACC,GAC3E,EAAKd,SAAS,CACb5E,KAAM,EAAKD,MAAMC,KACjBE,KAAM,EAAKH,MAAMG,KACjBE,SAAUsF,EAAEC,OAAOC,QACnBvF,SAAU,EAAKN,MAAMM,cAGvB,uBAAOkC,KAAK,QAAQP,GAAG,aAAaqD,IAAK,EAAGC,IAAK,GAAIC,MAAOxH,KAAKgC,MAAMG,KAAMuF,SAAU,SAACC,GACvF,EAAKd,SAAS,CACb5E,KAAM,EAAKD,MAAMC,KACjBE,KAAMwF,EAAEC,OAAOE,cACfzF,SAAU,EAAKL,MAAMK,SACrBC,SAAU,EAAKN,MAAMM,WAEtB,EAAKe,iBAEN,sBAAKY,GAAG,iBAAR,iBACK,uBAAOO,KAAK,WAAWkD,SAAU,SAACC,GACjCA,EAAEC,OAAOC,QAAS,EAAKlG,IAAIyB,MAAM,EAAK5B,KACrC,EAAKG,IAAIoG,WAAW,EAAKvG,KAC9B,EAAKO,YAAY+B,iBACb,uBALN,QAMM,uBAAOU,KAAK,WAAWkD,SAAU,SAACC,GAClCA,EAAEC,OAAOC,QAAS,EAAKhG,KAAKuB,MAAM,EAAK5B,KACtC,EAAKK,KAAKkG,WAAW,EAAKvG,KAC/B,EAAKO,YAAY+B,iBACb,uBAVN,cAWY,uBAAOU,KAAK,WAAWkD,SAAU,SAACC,GACxCA,EAAEC,OAAOC,QAAS,EAAK/F,WAAWsB,MAAM,EAAK5B,KAC5C,EAAKM,WAAWiG,WAAW,EAAKvG,KACrC,EAAKO,YAAY+B,iBACb,0BAEN,sBAAKG,GAAG,YAAY7E,UAAU,YAA9B,UACC,uBAAO6E,GAAG,cAAcuD,MAAO,mBAAoBhD,KAAK,SAASwD,QAAM,EAACC,QAAS,WAAQ,EAAKC,SAAShK,EAAc6I,UACrH,qBAAK9C,GAAG,uBAGT,sBAAKA,GAAG,WAAW7E,UAAU,YAA7B,UACC,uBAAO6E,GAAG,aAAauD,MAAO,gBAAiBhD,KAAK,SAASwD,QAAM,EAACC,QAAS,WAAQ,EAAKC,SAAShK,EAAckJ,SACjH,qBAAKnD,GAAG,sBAIT,sBAAKA,GAAG,WAAW7E,UAAU,YAA7B,UACC,uBAAO6E,GAAG,aAAauD,MAAO,gBAAiBhD,KAAK,SAASwD,QAAM,EAACC,QAAS,WAAQ,EAAKC,SAAShK,EAAcmJ,SACjH,qBAAKpD,GAAG,gC,GAnSIkE,IAAMC,WGHTC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqB5E,MAAK,YAAkD,IAA/C6E,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFlJ,SAASmH,eAAe,SAM1BqB,M","file":"static/js/main.8138dddc.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\nimport L, { LatLng, Polyline, LayerGroup, Point, LatLngBounds, Marker } from \"leaflet\";\nimport { SVGIcon } from \"./SVGIcon\";\nimport MarkerSVG from \"./marker.svg\";\n\ninterface Propane {\n}\n\nenum OpenableMenus {\n\tNONE,\n\tROUTE,\n\tTRIP,\n\tSTOP\n}\n\n\nclass App extends React.Component<Propane, any> {\n\tmap: L.Map | null = null;\n\tlineMap: Map<string, Polyline> = new Map<string, Polyline>();\n\tbus: LayerGroup = new LayerGroup();\n\ttram: LayerGroup = new LayerGroup();\n\ttrolleybus: LayerGroup = new LayerGroup();\n\tmarkerGroup: LayerGroup = new LayerGroup();\n\n\tconstructor(props: Propane) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tdate: new Date(\"2021-01-01\"),\n\t\t\thour: new Date().getHours(),\n\t\t\tautoHour: false,\n\t\t\tcurrMenu: OpenableMenus.NONE\n\t\t};\n\t\tsetInterval(this.updateThing.bind(this), 1500);\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.map == null) {\n\t\t\tthis.map = L.map('map', {\n\t\t\t\tcenter: [56.95, 24.11],\n\t\t\t\tmaxBounds: [[57.21, 23.20], [56.75, 24.66]],\n\t\t\t\tzoom: 13\n\t\t\t});\n\t\t}\n\t\tlet Jawg_Dark = L.tileLayer('https://{s}.tile.jawg.io/jawg-dark/{z}/{x}/{y}{r}.png?access-token={accessToken}', {\n\t\t\tattribution: '<a href=\"http://jawg.io\" title=\"Tiles Courtesy of Jawg Maps\" target=\"_blank\">&copy; <b>Jawg</b>Maps</a> &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t\tminZoom: 14,\n\t\t\tmaxZoom: 18,\n\t\t\tsubdomains: 'abcd',\n\t\t\taccessToken: 'iKbn4srGwDR8o2IxGUP8skNZ8T7AVxUrCiBvpwxYzLLRtSGXGhlY9W20wBr182yM'\n\t\t});\n\t\tJawg_Dark.addTo(this.map);\n\t\tthis.markerGroup.addTo(this.map);\n\t\tthis.setUpRoutes();\n\t}\n\n\tsetUpRoutes() {\n\t\tvar requestInit: RequestInit = {\n\t\t\tmode: \"cors\",\n\t\t\tmethod: \"GET\"\n\t\t};\n\t\tfetch(`https://busify.herokuapp.com/api/activity/routes?month=${(this.state.date as Date).getMonth() + 1}&day=${(this.state.date as Date).getDate()}&hour=${this.state.hour}&client=true&simpleShape=true`, requestInit)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((response: any[]) => {\n\t\t\t\tthis.bus.clearLayers();\n\t\t\t\tthis.tram.clearLayers();\n\t\t\t\tthis.trolleybus.clearLayers();\n\t\t\t\tresponse.forEach((a) => {\n\t\t\t\t\tlet id = a.id;\n\t\t\t\t\tlet passengers = a.relativeActivity;\n\t\t\t\t\tlet name = a.longName;\n\t\t\t\t\tlet num = a.shortName;\n\t\t\t\t\tlet type = a.type;\n\t\t\t\t\tif (a.shape === undefined) return;\n\t\t\t\t\tlet shape = a.shape as LatLng[];\n\t\t\t\t\tthis.showRoute(shape, passengers, \"(\" + num + \") \" + name + \"<br/>\" + a.passengers + \" passengers\", id, type);\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tgenerateStopRoute(routeId: string, routePath: Polyline) {\n\t\tlet stopPoints: LatLng[] = [];\n\t\tlet amountsPerStop: number[] = [];\n\t\tvar requestInit: RequestInit = {\n\t\t\tmode: \"cors\",\n\t\t\tmethod: \"GET\"\n\t\t};\n\t\tfetch(`http://busify.herokuapp.com/api/activity/stops?month=${(this.state.date as Date).getMonth() + 1}&day=${(this.state.date as Date).getDate()}&hour=${this.state.hour}&client=true&route=${routeId}`, requestInit)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((response: any[]) => {\n\t\t\t\tthis.markerGroup.clearLayers();\n\t\t\t\tresponse.forEach((a) => {\n\t\t\t\t\t// stopPoints.push(a.coord as LatLng);\n\t\t\t\t\t// amountsPerStop.push(a.relativeActivity);\n\t\t\t\t\tlet marker = new Marker(a.coord, {\n\t\t\t\t\t\ticon: new SVGIcon({\n\t\t\t\t\t\t\tsvgLink: MarkerSVG,\n\t\t\t\t\t\t\ticonAnchor: [16, 16],\n\t\t\t\t\t\t\ticonSize: new L.Point(32, 32),\n\t\t\t\t\t\t\tcolor: this.getColour(a.relativeActivity)\n\t\t\t\t\t\t})\n\t\t\t\t\t}).bindTooltip(\"Passengers: \" + a.passengers).addTo(this.markerGroup);\n\t\t\t\t});\n\t\t\t\treturn \"swag\";\n\t\t\t}).then(a => {\n\t\t\t\t// let endRes = new Map<LatLng[], number>();\n\t\t\t\t// let lngs = routePath.getLatLngs() as LatLng[];\n\t\t\t\t// for (let x = 0; x < stopPoints.length - 1; x++) {\n\t\t\t\t// \tlet point1 = this.map!.layerPointToLatLng(routePath.closestLayerPoint(this.map!.latLngToLayerPoint(stopPoints[x])));\n\t\t\t\t// \tlet point2 = this.map!.layerPointToLatLng(routePath.closestLayerPoint(this.map!.latLngToLayerPoint(stopPoints[x + 1])));\n\t\t\t\t// \tlet cool: LatLng[] = [];\n\t\t\t\t// \tconsole.table(lngs.indexOf([...lngs].sort((a, b) => { return point1.distanceTo(a) - point1.distanceTo(b) })[0]) - lngs.indexOf([...lngs].sort((a, b) => { return point2.distanceTo(a) - point2.distanceTo(b) })[0]) + 1);\n\t\t\t\t// \tfor (let y = lngs.indexOf([...lngs].sort((a, b) => { return point1.distanceTo(a) - point1.distanceTo(b) })[0]); y < lngs.indexOf([...lngs].sort((a, b) => { return point2.distanceTo(a) - point2.distanceTo(b) })[0]) + 1; y++) {\n\t\t\t\t// \t\tcool.push(lngs[y]);\n\t\t\t\t// \t}\n\t\t\t\t// \tendRes.set(cool, amountsPerStop[x]);\n\t\t\t\t// }\n\t\t\t\t// this.paintSegments(endRes);\n\t\t\t});\n\t}\n\n\tpaintSegments(segmentData: Map<LatLng[], number>) {\n\t\tsegmentData.forEach((v, k) => {\n\t\t\tlet polyline = L.polyline(k, { color: this.getColour(v), weight: 10, opacity: 0.5 });\n\t\t\tpolyline.addTo(this.map!);\n\t\t\t// this.lineMap.set(id, polyline);\n\t\t});\n\t}\n\n\tgetColour(between: number) {\n\t\treturn \"rgb(\" + (255 * (1 - between)) + \",\" + (255 * between) + \",0)\";\n\t}\n\n\tchangeLight(colour: string, amount: number) {\n\t\tlet colourDiv: string[] = colour.split(',');\n\t\tif (colourDiv.length !== 3) throw new Error(\"Invalid Colour\");\n\t\tcolourDiv[0] = colourDiv[0].substring(4);\n\t\tcolourDiv[2] = colourDiv[2].replace(')', '');\n\t\tlet colourReal: number[] = colourDiv.map(x => parseInt(x));\n\t\tif (amount >= 0) {\n\t\t\treturn `rgb(${colourReal[0] * amount},${colourReal[1] * amount},${colourReal[2] * amount})`;\n\t\t} else {\n\t\t\treturn `rgb(${colourReal[0] / -amount},${colourReal[1] / -amount},${colourReal[2] / -amount})`;\n\t\t}\n\t}\n\n\tonRouteHoverOn(id: string) {\n\t\tthis.lineMap.forEach((v, k) => {\n\t\t\tif (k !== id) {\n\t\t\t\tv.setStyle({\n\t\t\t\t\tcolor: this.changeLight(this.lineMap.get(k)!.options.color!, -2)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tonRouteHoverOff(id: string) {\n\t\tthis.lineMap.forEach((v, k) => {\n\t\t\tif (k !== id) {\n\t\t\t\tv.setStyle({\n\t\t\t\t\tcolor: this.changeLight(this.lineMap.get(k)!.options.color!, 2)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tshowRoute(shape: LatLng[], activity: number, name: string, id: string, type: number) {\n\t\tlet polyline = L.polyline(shape, { color: this.getColour(activity), weight: 10, opacity: 0.5 })\n\t\t\t.bindTooltip(name, { sticky: true });\n\t\tpolyline\n\t\t\t.addEventListener(\"mouseover\", () => { this.onRouteHoverOn(id) })\n\t\t\t.addEventListener(\"mouseout\", () => { this.onRouteHoverOff(id) })\n\t\t\t.addEventListener(\"click\", () => { this.generateStopRoute(id, this.lineMap.get(id)!) });\n\t\tthis.lineMap.set(id, polyline);\n\t\tswitch (type) {\n\t\t\tcase 0:\n\t\t\t\tthis.bus.addLayer(polyline);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tthis.trolleybus.addLayer(polyline);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.tram.addLayer(polyline);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tupdateThing() {\n\t\tif (this.state.autoHour) {\n\t\t\tthis.setState({\n\t\t\t\tdate: this.state.date,\n\t\t\t\thour: this.state.hour + 1 > 23 ? 0 : this.state.hour + 1,\n\t\t\t\tautoHour: this.state.autoHour,\n\t\t\t\tcurrMenu: this.state.currMenu\n\t\t\t});\n\t\t\tthis.setUpRoutes();\n\t\t}\n\t}\n\n\topenMenu(menuType: OpenableMenus) {\n\t\tswitch (this.state.currMenu) {\n\t\t\tcase OpenableMenus.ROUTE:\n\t\t\t\tdocument.getElementById(\"routeList\")?.classList.remove(\"listOpen\");\n\t\t\t\tdocument.getElementById(\"routeList\")?.classList.add(\"listClose\");\n\t\t\t\tbreak;\n\t\t\tcase OpenableMenus.TRIP:\n\t\t\t\tdocument.getElementById(\"tripList\")?.classList.remove(\"listOpen\");\n\t\t\t\tdocument.getElementById(\"tripList\")?.classList.add(\"listClose\");\n\t\t\t\tbreak;\n\t\t\tcase OpenableMenus.STOP:\n\t\t\t\tdocument.getElementById(\"stopList\")?.classList.remove(\"listOpen\");\n\t\t\t\tdocument.getElementById(\"stopList\")?.classList.add(\"listClose\");\n\t\t\t\tbreak;\n\t\t}\n\t\tif (menuType !== this.state.currMenu) {\n\t\t\tswitch (menuType) {\n\t\t\t\tcase OpenableMenus.ROUTE:\n\t\t\t\t\tdocument.getElementById(\"routeList\")?.classList.remove(\"listClose\");\n\t\t\t\t\tdocument.getElementById(\"routeList\")?.classList.add(\"listOpen\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase OpenableMenus.TRIP:\n\t\t\t\t\tdocument.getElementById(\"tripList\")?.classList.remove(\"listClose\");\n\t\t\t\t\tdocument.getElementById(\"tripList\")?.classList.add(\"listOpen\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase OpenableMenus.STOP:\n\t\t\t\t\tdocument.getElementById(\"stopList\")?.classList.remove(\"listClose\");\n\t\t\t\t\tdocument.getElementById(\"stopList\")?.classList.add(\"listOpen\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tdate: this.state.date,\n\t\t\t\thour: this.state.hour,\n\t\t\t\tautoHour: this.state.autoHour,\n\t\t\t\tcurrMenu: menuType\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tdate: this.state.date,\n\t\t\t\thour: this.state.hour,\n\t\t\t\tautoHour: this.state.autoHour,\n\t\t\t\tcurrMenu: OpenableMenus.NONE\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t<div id=\"map\" />\n\t\t\t\t<div id=\"GUI\">\n\t\t\t\t\t<input type=\"date\" id=\"selectDate\" min=\"2021-01-01\" max=\"2021-01-31\" value={this.state.date.toISOString().split('T')[0]} onChange={(e) => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tdate: new Date(e.target.value!),\n\t\t\t\t\t\t\thour: this.state.hour,\n\t\t\t\t\t\t\tautoHour: this.state.autoHour,\n\t\t\t\t\t\t\tcurrMenu: this.state.currMenu\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setUpRoutes();\n\t\t\t\t\t}} />\n\t\t\t\t\t<h1 id=\"time\">{this.state.hour}:00</h1>\n\t\t\t\t\t<input type=\"checkbox\" id=\"autoHour\" value={this.state.autoHour} onChange={(e) => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tdate: this.state.date,\n\t\t\t\t\t\t\thour: this.state.hour,\n\t\t\t\t\t\t\tautoHour: e.target.checked,\n\t\t\t\t\t\t\tcurrMenu: this.state.currMenu\n\t\t\t\t\t\t});\n\t\t\t\t\t}} />\n\t\t\t\t\t<input type=\"range\" id=\"selectHour\" min={0} max={23} value={this.state.hour} onChange={(e) => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tdate: this.state.date,\n\t\t\t\t\t\t\thour: e.target.valueAsNumber,\n\t\t\t\t\t\t\tautoHour: this.state.autoHour,\n\t\t\t\t\t\t\tcurrMenu: this.state.currMenu\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setUpRoutes();\n\t\t\t\t\t}} />\n\t\t\t\t\t<div id=\"transportTypes\">\n\t\t\t\t\t\tBus <input type=\"checkbox\" onChange={(e) => {\n\t\t\t\t\t\t\tif (e.target.checked) this.bus.addTo(this.map!);\n\t\t\t\t\t\t\telse this.bus.removeFrom(this.map!);\n\t\t\t\t\t\t\tthis.markerGroup.clearLayers();\n\t\t\t\t\t\t}} /><br />\n\t\t\t\t\t\tTram <input type=\"checkbox\" onChange={(e) => {\n\t\t\t\t\t\t\tif (e.target.checked) this.tram.addTo(this.map!);\n\t\t\t\t\t\t\telse this.tram.removeFrom(this.map!);\n\t\t\t\t\t\t\tthis.markerGroup.clearLayers();\n\t\t\t\t\t\t}} /><br />\n\t\t\t\t\t\tTrolleybus <input type=\"checkbox\" onChange={(e) => {\n\t\t\t\t\t\t\tif (e.target.checked) this.trolleybus.addTo(this.map!);\n\t\t\t\t\t\t\telse this.trolleybus.removeFrom(this.map!);\n\t\t\t\t\t\t\tthis.markerGroup.clearLayers();\n\t\t\t\t\t\t}} /><br />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"routeList\" className=\"listClose\">\n\t\t\t\t\t\t<input id=\"routeDrawer\" value={\"R\\nO\\nU\\nT\\nE\\nS\"} type=\"button\" hidden onClick={() => { this.openMenu(OpenableMenus.ROUTE) }} />\n\t\t\t\t\t\t<div id=\"actualRouteList\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"tripList\" className=\"listClose\">\n\t\t\t\t\t\t<input id=\"tripDrawer\" value={\"T\\nR\\nI\\nP\\nS\"} type=\"button\" hidden onClick={() => { this.openMenu(OpenableMenus.TRIP) }} />\n\t\t\t\t\t\t<div id=\"actualTripList\">\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"stopList\" className=\"listClose\">\n\t\t\t\t\t\t<input id=\"stopDrawer\" value={\"S\\nT\\nO\\nP\\nS\"} type=\"button\" hidden onClick={() => { this.openMenu(OpenableMenus.STOP) }} />\n\t\t\t\t\t\t<div id=\"actualStopList\">\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This is stolen from an another thing I did :)\nimport * as L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport SVGIconOptions from \"./SVGIconOptions\";\n\nexport class SVGIcon extends L.DivIcon {\n\toptions: SVGIconOptions = {\n\t\tcolor: \"rgb(255,255,255)\",\n\t\ticonAnchor: new L.Point(0, 0),\n\t\ttooltipAnchor: new L.Point(0, 0),\n\t\ticonSize: new L.Point(32, 48),\n\t\topacity: 1,\n\t\tpopupAnchor: new L.Point(0, 0),\n\t\tshadowAngle: 45,\n\t\tshadowBlur: 1,\n\t\tshadowColor: \"rgb(0,0,10)\",\n\t\tshadowEnable: false,\n\t\tshadowLength: 0.75,\n\t\tshadowOpacity: 0.5,\n\t\tshadowTranslate: new L.Point(0, 0),\n\t\tweight: 2,\n\t\tclassName: \"svgicon\",\n\t\ticonUrl: undefined,\n\t\tsvgLink: undefined,\n\t\tinteractable: false\n\t};\n\n\tconstructor(options?: any) {\n\t\tsuper(options);\n\t\toptions = L.Util.setOptions(this, options);\n\n\t\tthis.options.html = this._createSVG();\n\t}\n\n\tprivate _createSVG(): HTMLObjectElement {\n\t\tconst resEl = document.createElement(\"object\") as HTMLObjectElement;\n\t\tresEl.setAttribute(\"data\", this.options.svgLink!);\n\n\t\tresEl.addEventListener(\"load\", (ev) => {\n\t\t\tresEl.style.setProperty(\"pointer-events\", \"none\");\n\t\t\tif (this.options.interactable) resEl.getSVGDocument()!.querySelector(\"svg\")!.style.cursor = \"pointer\";\n\t\t\tresEl.getSVGDocument()!.querySelector(\"svg\")!.setAttribute(\"width\", this.options.iconSize.x.toString() + \"px\");\n\t\t\tresEl.getSVGDocument()!.querySelector(\"svg\")!.setAttribute(\"height\", this.options.iconSize.y.toString() + \"px\");\n\t\t\tthis.setColor(this.options.color);\n\t\t});\n\n\t\treturn resEl;\n\t}\n\n\tsetColor(newColor: string) {\n\t\tthis.options.color = newColor;\n\n\t\tconst innerSVAG = (this.options.html as HTMLObjectElement).getSVGDocument();\n\n\t\tif (!innerSVAG) return;\n\n\t\tconst pathAr = innerSVAG.getElementsByTagNameNS(\"http://www.w3.org/2000/svg\", \"path\");\n\t\tconst paths: SVGElement[] = Object.values(pathAr);\n\n\t\tfor (const path of paths) {\n\t\t\tif (path.hasAttribute(\"iconColorIgnore\")) continue;\n\n\t\t\tpath.style.setProperty(\"fill\", newColor);\n\t\t\tpath.style.setProperty(\"opacity\", this.options.opacity.toString());\n\t\t}\n\n\t\tconst rectAr = innerSVAG.getElementsByTagNameNS(\"http://www.w3.org/2000/svg\", \"rect\");\n\t\tconst rects: SVGElement[] = Object.values(rectAr);\n\n\t\tfor (const rect of rects) {\n\t\t\tif (rect.hasAttribute(\"iconColorIgnore\")) continue;\n\n\t\t\trect.style.setProperty(\"fill\", newColor);\n\t\t\trect.style.setProperty(\"opacity\", this.options.opacity.toString());\n\t\t}\n\t}\n}","export default __webpack_public_path__ + \"static/media/marker.5ef2d77e.svg\";","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}